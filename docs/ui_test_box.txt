making a box for UI-level testing box

Create a new system with 3072 megabytes of ram and 12 gigs hard drive.

Alter its settings:
  Put it on the same NAT network as the other boxes
  Put the CentOS7 disc in the virtual drive.

Start the server.

Choose to install Centos7.  (No need to check the media first)

Choose English as the language
Click Installation Destination and click Done on the followup screen to return
Click Network & Hostname and toggle the network "ON" on the following page, then click Done.
Click Software selection and choose KDE Plasma Workspaces, then click Done
Click Begin Installation
Click on User Creation.  Provide information for a user, and select to make the user an administrator and to *not* require a password.

... wait for the install to complete...

reboot.

Click on Licensing.  Accept.  Click Done.  Click Finish Installation.

Login.

Right-click the screen and click on Konsole to get a command-line terminal.

Disable the firewall (see DISABLE FIREWALL in system_guide.txt)
Disable SELinux (see DISABLE SELINUX in system_guide.txt)
Allow no-password login in ssh (see ENABLE SSH WITH NO PASSWORD in system_guide.txt)

reboot. login.

Open another command-line terminal by right-clicking and choosing Konsole.
Set up port forwarding (see PORT FORWARDING in system_guide.txt), with one variation:
  name it "ssh_UI_test_box" and give it a host port of 3322.

Install Chrome:

 $ sudo yum install -y wget
 $ wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
 $ sudo yum localinstall -y google-chrome-stable_current_x86_64.rpm

Start Chrome by selecting it from the bottom left-hand button and entering
the text "Chrome", then click on the icon.  Choose a means of securing information,
and get through until you see the chrome://welcome page.  Test it by going to Google.com

The system will need a Database.  Install.  See DATABASE_INSTALL in system_guide.txt

We also want to make this database able to be hit from outside the
box, so we can restore and run database migrations on it
from outside.  To do that, first, open the configuration file:

$ sudo vim /var/lib/pgsql/10/data/postgresql.conf

then, replace line

listen_addresses = 'localhost'
    with
listen_addresses = '*'

Get Java installed.  See INSTALL JAVA in system_guide.txt

Install Python Pip, Selenium, and Behave:

$ curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
$ sudo python get-pip.py
$ sudo pip install behave
$ sudo pip install selenium
$ sudo pip install pyhamcrest

Download Chromedriver from here: http://chromedriver.chromium.org/downloads

Download and unzip it on your path.  I recommend a place that is
already on your path, /usr/local/sbin


install Tomcat 9:
$ wget http://www.gtlib.gatech.edu/pub/apache/tomcat/tomcat-9/v9.0.14/bin/apache-tomcat-9.0.14.tar.gz
$ sudo mv apache-tomcat-9.0.14 /opt/tomcat
$ sudo useradd -r tomcat --shell /bin/false
$ sudo chown -R tomcat:tomcat /opt/tomcat/

at /etc/systemd/system/tomcat.service create this file:


---------------------------------- FILE START
[Unit]
Description=Apache Tomcat 9
After=syslog.target network.target

[Service]
User=tomcat
Group=tomcat
Type=forking
Environment=CATALINA_PID=/opt/tomcat/tomcat.pid
Environment=CATALINA_HOME=/opt/tomcat
Environment=CATALINA_BASE=/opt/tomcat
ExecStart=/opt/tomcat/bin/startup.sh
ExecStop=/opt/tomcat/bin/shutdown.sh
Restart=on-failure

[Install]
WantedBy=multi-user.target
---------------------------------- FILE END

Save the file and run the following command to reload the systemd manager configuration
$ sudo systemctl daemon-reload

Now you can start the Apache Tomcat 9 server and enable it to start on boot time

$ sudo systemctl start tomcat
$ sudo systemctl enable tomcat

Tomcat will start serving on port 8080 on the machine.  Add a port forwarding
rule for it:

+--------------+----------+---------+-----------+-----------+------------+
| Name         | Protocol | Host IP | Host Port | Guest IP  | Guest Port |
+--------------+----------+---------+-----------+-----------+------------+
| box1_ssh     | TCP      |         | 2001      | 10.0.2.15 | 22         |
+--------------+----------+---------+-----------+-----------+------------+
| box2_ssh     | TCP      |         | 3001      | 10.0.2.16 | 22         |
+--------------+----------+---------+-----------+-----------+------------+
| box2_jenkins | TCP      |         | 3002      | 10.0.2.16 | 8080       |
+--------------+----------+---------+-----------+-----------+------------+
| box2_sonar   | TCP      |         | 3003      | 10.0.2.16 | 9000       |
+--------------+----------+---------+-----------+-----------+------------+
| box2_80      | TCP      |         | 3004      | 10.0.2.16 | 80         |
+--------------+----------+---------+-----------+-----------+------------+
| ui_ssh       | TCP      |         | 4001      | 10.0.2.16 | 22         |
+--------------+----------+---------+-----------+-----------+------------+
| ui_8080      | TCP      |         | 4002      | 10.0.2.16 | 80         |
+--------------+----------+---------+-----------+-----------+------------+


